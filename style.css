:root {
  --bg: #0f0f11;
  --panel: #18181b;
  --accent: #4f72ff;
  --accent-glow: 174 58% 55%;
  --text: #e9eaec;
  --text-dim: #a3a7b0;
  --danger: #ff4d4f;
  --radius: 14px;
  --shadow: 0 4px 20px -4px rgba(0,0,0,.6);
  --focus-ring: 0 0 0 3px rgba(79,114,255,.35);
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;
}
* { box-sizing: border-box; }
body {
  margin: 0; padding: 40px clamp(16px,4vw,48px);
  background: radial-gradient(circle at 30% 20%, #15161a, #0d0d0f 55%); 
  color: var(--text);
  min-height: 100vh; display: flex; flex-direction: column; align-items: center; gap: 32px;
}
h1 { font-size: clamp(1.6rem,4vw,2.4rem); margin: 0 0 4px; letter-spacing: .5px; font-weight:600; }
p.subtitle { margin: 0 0 20px; color: var(--text-dim); font-size: .95rem; }

.card { width: 100%; background: var(--panel); padding: 28px 26px 34px; border-radius: var(--radius); position: relative; box-shadow: var(--shadow); }
.card::before { content:""; position:absolute; inset:0; border-radius: inherit; pointer-events:none; background: linear-gradient(140deg,rgba(79,114,255,.18),transparent 60%); mix-blend-mode: overlay; }

form { display: flex; flex-direction: column; gap: 14px; }
.input-row { display: flex; gap: 10px; }
input[type=url] { flex:1; background:#121214; border:1px solid #26262a; padding:14px 16px; border-radius: 10px; color: var(--text); font-size: 15px; letter-spacing:.3px; transition: border-color .2s, background .25s, box-shadow .25s; }
input[type=url]::placeholder { color:#555; }
input[type=url]:focus { outline:none; border-color: var(--accent); box-shadow: var(--focus-ring); }

button { cursor:pointer; background: var(--accent); color:#fff; font-weight:600; border:none; padding:14px 22px; border-radius: 10px; font-size:15px; letter-spacing:.5px; display:flex; align-items:center; gap:8px; transition: background .3s, transform .25s, box-shadow .3s; }
button:hover { background:#3d5fde; }
button:active { transform: translateY(2px); }
button.secondary { background:#26262a; color: var(--text-dim); font-weight:500; }
button.secondary:hover { background:#2f2f34; color: var(--text); }

.error { color: var(--danger); font-size: .85rem; min-height: 18px; line-height: 18px; letter-spacing:.3px; }
.result-wrap { margin-top: 24px; display:flex; flex-direction:column; gap:16px; }
.iframe-shell { position:relative; width:100%; aspect-ratio: 16 / 9; background:#101014; border:1px solid #1f1f23; border-radius: 12px; overflow:hidden; display:grid; place-items:center; }
.iframe-shell.loading::after { content:""; position:absolute; inset:0; background: repeating-linear-gradient(45deg,#16181c 0 12px,#1c1e22 12px 24px); animation: pulse 1.6s linear infinite; opacity:.55; }
@keyframes pulse { 0%{filter:brightness(.9)} 50%{filter:brightness(1.05)} 100%{filter:brightness(.9)} }
iframe { width:100%; height:100%; border:0; }

/* Removed embed-code block */

footer { margin-top:auto; padding:30px 0 10px; font-size:.75rem; opacity:.5; }
a { color: var(--accent); text-decoration:none; }
a:hover { text-decoration:underline; }

@media (max-width:600px) {
  .card { padding:24px 20px 30px; }
  .input-row { flex-wrap:wrap; }
  .input-row button { flex:1 1 32%; }
  .app-layout { flex-direction:column; }
  .queue-panel { order:2; }
}

/* New layout for queue (updated) */
.app-layout { width:100%; max-width: 1180px; display:flex; gap:28px; align-items:flex-start; }
.main-panel { flex:1 1 auto; min-width:0; }
.queue-panel { flex:0 0 320px; width:320px; min-width:320px; max-width:320px; display:flex; flex-direction:column; gap:16px; }
.queue-header { display:flex; align-items:center; justify-content:space-between; gap:10px; }
.queue-title { margin:0; font-size:1.15rem; font-weight:600; letter-spacing:.5px; }
.secondary.small { padding:8px 14px; font-size:.75rem; }
.queue-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:12px; max-height:360px; overflow-y:auto; scrollbar-width:thin; }
.queue-list::-webkit-scrollbar { width:8px; }
.queue-list::-webkit-scrollbar-track { background:#141416; }
.queue-list::-webkit-scrollbar-thumb { background:#26262a; border-radius:10px; }
.queue-item { background:#121214; border:1px solid #232327; padding:14px 16px 16px; border-radius:12px; font-size:.85rem; color:var(--text-dim); display:flex; align-items:center; gap:12px; cursor:pointer; position:relative; transition: border-color .25s, background .25s, color .25s; min-height:70px; width:100%; max-width:100%; box-sizing:border-box; }
.queue-item:hover { background:#18181c; color:var(--text); }
.queue-item.active { border-color: var(--accent); background:#1a1d27; color: var(--text); box-shadow: 0 0 0 2px rgba(79,114,255,.25); }
.queue-item.dragging { opacity:.4; }
.queue-item.drag-over { outline:2px dashed var(--accent); outline-offset:2px; }
.queue-item .handle { font-size:.9rem; opacity:.55; cursor:grab; user-select:none; }
.queue-item .handle:active { cursor:grabbing; }
.queue-item .del-btn { position:absolute; top:6px; right:8px; background:#232327; border:none; color:#888; font-size:.75rem; width:26px; height:26px; border-radius:8px; display:flex; align-items:center; justify-content:center; padding:0; cursor:pointer; transition: background .2s, color .2s; }
.queue-item .del-btn:hover { background:#2e2e33; color:#fff; }
.queue-item.active .del-btn { background:#2a3242; color:#dbe2ff; }
.queue-item .thumb-wrap { width:90px; height:54px; flex:0 0 90px; border-radius:8px; background:#1d1d22; overflow:hidden; position:relative; display:grid; place-items:center; }
.queue-item .thumb-wrap img { max-width:100%; }
.queue-item .thumb-wrap img { width:100%; height:100%; object-fit:cover; display:block; }
.queue-item.loading .thumb-wrap { background: repeating-linear-gradient(45deg,#18181d 0 12px,#1f1f24 12px 24px); animation: pulse 1.6s linear infinite; }
.queue-item .meta { display:flex; flex-direction:column; gap:4px; min-width:0; flex:1 1 auto; }
.queue-item .title { font-size:.78rem; line-height:1.25; color:var(--text); display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; word-break:break-word; line-clamp:2; max-width:100%; }
.queue-item.long .title { white-space:normal; }
/* Prevent overflow beyond panel */
.queue-list, .queue-item, .queue-item .meta { max-width:100%; }
/* Prevent queue panel from stretching due to flex children */
.queue-list { width:100%; }
.queue-item.loading .title { color: var(--text-dim); }
.queue-item .orig { font-size:.63rem; opacity:.55; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.queue-item .qid { font-weight:600; font-size:.6rem; opacity:.65; letter-spacing:.5px; position:absolute; top:6px; left:8px; background:#202025; padding:2px 6px; border-radius:6px; }
.queue-empty { font-size:.8rem; color:var(--text-dim); opacity:.7; }
.nav-controls { display:flex; justify-content:space-between; gap:12px; }
.nav-controls button { flex:1; }
@media (max-width:600px) { .queue-item { padding:10px 12px; } .queue-item .thumb-wrap { width:64px; height:36px; } }
/* Modal */
.modal-backdrop { position:fixed; inset:0; background:rgba(15,15,18,.75); backdrop-filter:blur(6px); display:flex; align-items:center; justify-content:center; z-index:1000; }
.modal-backdrop[hidden] { display:none !important; }
.modal { background:var(--panel); padding:28px 26px 24px; border-radius:16px; width: min(400px, 92%); box-shadow:0 8px 40px -6px rgba(0,0,0,.6); display:flex; flex-direction:column; gap:18px; position:relative; }
.modal h3 { margin:0; font-size:1.2rem; }
.modal-text { margin:0; font-size:.85rem; color:var(--text-dim); line-height:1.4; }
.modal-actions { display:flex; gap:12px; justify-content:flex-end; }
.modal-actions button { flex:0 0 auto; }
button.danger { background:#ff4d4f; }
button.danger:hover { background:#e84143; }
.modal .close-btn { position:absolute; top:10px; right:12px; width:30px; height:30px; border-radius:8px; background:#232327; border:none; color:#888; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:16px; transition: background .2s, color .2s; }
.modal .close-btn:hover { background:#2e2e33; color:#fff; }
