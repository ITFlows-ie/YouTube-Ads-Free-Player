input[type=url] {
  flex:1; background: hsl(230 15% 8%); border:1px solid hsl(230 12% 20%);
  padding:.9rem 1rem; border-radius:.65rem; color:var(--text);
  font-size:.95rem; letter-spacing:.02em; transition: border-color .2s, background .25s, box-shadow .25s;
}
input[type=url]::placeholder { color:hsl(230 10% 40%); }
input[type=url]:focus { outline:none; border-color: var(--accent); box-shadow: var(--focus-ring); }

.input-wrapper { position:relative; flex:1 1 auto; display:flex; }
.input-wrapper.empty .input-clear-btn { display:none; }
.input-clear-btn { position:absolute; top:50%; right:.55rem; transform:translateY(-50%); background:hsl(230 12% 18%); border:1px solid hsl(230 12% 26%); color:hsl(230 10% 60%); font-size:1.15rem; padding:.35rem .55rem; min-width:2.2rem; cursor:pointer; line-height:1; display:inline-flex; align-items:center; justify-content:center; border-radius:.6rem; transition: color .2s, background .25s, border-color .25s, transform .15s; }
.input-clear-btn:hover { color:var(--text); background:hsl(230 12% 24%); border-color:hsl(230 12% 30%); }
.input-clear-btn:active { transform:translateY(-50%) scale(.9); background:hsl(230 14% 28%); }

button { background: var(--accent); color:#fff; font-weight:600; padding:.9rem 1.3rem; border-radius:.65rem; font-size:.9rem; letter-spacing:.03em; display:inline-flex; align-items:center; gap:.5rem; transition: background .3s, transform .25s, box-shadow .3s; }
button:hover { background:hsl(227 90% 58%); }
button:active { transform: translateY(2px); }
button.secondary { background: hsl(230 12% 18%); color: var(--text-dim); font-weight:500; }
button.secondary:hover { background:hsl(230 12% 24%); color: var(--text); }
button.small { padding:.55rem .85rem; font-size:.7rem; }

/* Icon buttons around URL input */
.input-row button { justify-content:center; padding:.85rem .9rem; }
.input-row .btn-icon { font-size:1.1rem; line-height:1; }

.error { color: var(--danger); font-size:.75rem; min-height:1.1rem; line-height:1.1rem; letter-spacing:.02em; }
.result-wrap { margin-top:1.4rem; display:flex; flex-direction:column; gap:1rem; }
.iframe-shell { position:relative; width:100%; aspect-ratio:16/9; background:hsl(230 15% 7%); border:1px solid hsl(230 12% 18%); border-radius: .75rem; overflow:hidden; display:grid; place-items:center; }
/* Rotation hint overlay */
.rotate-hint { position:absolute; inset:0; background:rgba(0,0,0,.55); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.6rem; color:#fff; font-size:.8rem; letter-spacing:.05em; text-align:center; padding:1rem; opacity:0; pointer-events:none; transition:opacity .25s; }
.rotate-hint.show { opacity:1; }
.rotate-hint .hint-icon { font-size:2.2rem; opacity:.85; }
.iframe-shell.loading::after { content:""; position:absolute; inset:0; background: repeating-linear-gradient(45deg,hsl(230 15% 9%) 0 12px,hsl(230 15% 11%) 12px 24px); animation: pulse 1.6s linear infinite; opacity:.55; }
@keyframes pulse { 0%{filter:brightness(.9)} 50%{filter:brightness(1.05)} 100%{filter:brightness(.9)} }
iframe { width:100%; height:100%; border:0; }

.queue-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.75rem; max-height:22.5rem; overflow-y:auto; scrollbar-width:thin; }
.queue-list::-webkit-scrollbar { width:.5rem; }
.queue-list::-webkit-scrollbar-track { background:hsl(230 15% 10%); }
.queue-list::-webkit-scrollbar-thumb { background:hsl(230 12% 24%); border-radius:.6rem; }
.queue-item { background:hsl(230 15% 7%); border:1px solid hsl(230 12% 22%); padding:.9rem .95rem 1rem; border-radius:.75rem; font-size:.8rem; color:var(--text-dim); display:flex; align-items:center; gap:.75rem; cursor:pointer; position:relative; transition: border-color .25s, background .25s, color .25s; min-height:4.4rem; width:100%; max-width:100%; box-sizing:border-box; }
.queue-item:hover { background:hsl(230 14% 12%); color:var(--text); }
.queue-item.active { border-color: var(--accent); background:hsl(230 20% 18%); color: var(--text); box-shadow: 0 0 0 .12rem rgba(var(--accent-rgb),.35); }
.queue-item.dragging { opacity:.4; }
.queue-item.drag-over { outline:.13rem dashed var(--accent); outline-offset:.15rem; }
.queue-item .handle { font-size:.85rem; opacity:.55; cursor:grab; user-select:none; }
.queue-item .handle:active { cursor:grabbing; }
.queue-item .del-btn { position:absolute; top:.4rem; right:.5rem; background:hsl(230 12% 20%); border:none; color:#888; font-size:.7rem; width:1.65rem; height:1.65rem; border-radius:.55rem; display:flex; align-items:center; justify-content:center; padding:0; cursor:pointer; transition: background .2s, color .2s; }
.queue-item .del-btn:hover { background:hsl(230 12% 26%); color:#fff; }
.queue-item.active .del-btn { background:hsl(230 22% 30%); color:#dbe2ff; }
.queue-item .thumb-wrap { width:var(--thumb-w); height:var(--thumb-h); flex:0 0 var(--thumb-w); border-radius:.55rem; background:hsl(230 15% 12%); overflow:hidden; position:relative; display:grid; place-items:center; }
.queue-item .thumb-wrap img { width:100%; height:100%; object-fit:cover; display:block; }
.queue-item.loading .thumb-wrap { background: repeating-linear-gradient(45deg,hsl(230 15% 9%) 0 12px,hsl(230 15% 11%) 12px 24px); animation: pulse 1.6s linear infinite; }
.queue-item .queue-duration { position:absolute; right:.35rem; bottom:.35rem; padding:.12rem .32rem; font-size:.6rem; font-weight:700; background:rgba(0,0,0,.7); color:#fff; border-radius:.35rem; letter-spacing:.02em; }
.queue-item .meta { display:flex; flex-direction:column; gap:.3rem; min-width:0; flex:1 1 auto; }
.queue-item .title { font-size:.75rem; line-height:1.2; color:var(--text); display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; word-break:break-word; line-clamp:2; max-width:100%; }
.queue-item.loading .title { color: var(--text-dim); }
.queue-item .qid { font-weight:600; font-size:.55rem; opacity:.65; letter-spacing:.04em; position:absolute; top:.4rem; left:.55rem; background:hsl(230 14% 16%); padding:.15rem .45rem; border-radius:.5rem; }
.queue-empty { font-size:.7rem; color:var(--text-dim); opacity:.7; }
.nav-controls { display:flex; justify-content:space-between; gap:.75rem; align-items:center; }
.nav-controls button { flex:1; }
.autoplay-toggle { display:flex; align-items:center; margin-left:.25rem; }
.autoplay-toggle label { display:flex; align-items:center; gap:.25rem; font-size:.65rem; color:var(--text-dim); cursor:pointer; }
.autoplay-toggle input[type="checkbox"] { width:1.1rem; height:1.1rem; border-radius:.3rem; border:1px solid hsl(230 12% 30%); background:hsl(230 15% 8%); appearance:none; display:inline-block; position:relative; }
.autoplay-toggle input[type="checkbox"]:checked::after { content:''; position:absolute; inset:.16rem; border-radius:.18rem; background:var(--accent); }

/* Recommendations block */
.recs { margin-top:1rem; background:hsl(230 15% 8%); border:1px solid hsl(230 12% 18%); border-radius:.75rem; padding:1rem; display:flex; flex-direction:column; gap:.65rem; }
.recs-header { font-weight:700; font-size:.85rem; letter-spacing:.03em; }
.recs-list { display:grid; grid-template-columns:repeat(auto-fill, minmax(160px,1fr)); gap:.7rem; }
.rec-item { display:flex; flex-direction:column; gap:.45rem; align-items:stretch; background:hsl(230 15% 10%); border:1px solid hsl(230 12% 22%); border-radius:.75rem; padding:.5rem; color:var(--text); text-align:left; cursor:pointer; transition: background .2s, border-color .2s; }
.rec-item:hover { background:hsl(230 15% 14%); border-color: var(--accent); }
.rec-thumb { position:relative; width:100%; aspect-ratio:16/9; overflow:hidden; border-radius:.6rem; background:#111; }
.rec-thumb-img { position:absolute; inset:0; background-size:cover; background-position:center; filter:brightness(.95); }
.rec-duration { position:absolute; right:.45rem; bottom:.45rem; padding:.15rem .35rem; font-size:.7rem; font-weight:700; background:rgba(0,0,0,.7); border-radius:.35rem; color:#fff; letter-spacing:.02em; }
.rec-save { position:absolute; top:.4rem; right:.4rem; width:1.9rem; height:1.9rem; border-radius:.35rem; border:1px solid hsl(230 12% 30%); background:rgba(0,0,0,.55); color:#fff; font-weight:800; font-size:1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition: background .2s, transform .2s, border-color .2s; }
.rec-save:hover { background:rgba(0,0,0,.78); border-color: var(--accent); transform:scale(1.03); }
.rec-save:focus { outline:2px solid var(--accent); outline-offset:2px; }
.rec-progress { position:absolute; left:0; bottom:0; height:4px; width:100%; background:rgba(255,255,255,.08); }
.rec-progress span { display:block; height:100%; background:var(--accent); border-radius:0 4px 4px 0; }
.rec-meta { display:flex; flex-direction:column; gap:.15rem; min-width:0; }
.rec-title { font-size:.82rem; font-weight:650; line-height:1.3; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; }
.recs-empty { font-size:.72rem; color:var(--text-dim); opacity:.7; }

@media (max-width: 640px){
  .rec-save { width:2.2rem; height:2.2rem; font-size:1.15rem; }
}

/* Modal */
.modal-backdrop { position:fixed; inset:0; background:rgba(15,15,18,.75); backdrop-filter:blur(6px); display:flex; align-items:center; justify-content:center; z-index:3000; }
.modal-backdrop[hidden] { display:none !important; }
.modal { background:var(--panel); padding:1.75rem 1.65rem 1.5rem; border-radius: var(--radius-l); width:min(25rem,92%); box-shadow:0 .5rem 2.5rem -0.4rem rgba(0,0,0,.6); display:flex; flex-direction:column; gap:1.1rem; position:relative; }
.modal h3 { margin:0; font-size:1.15rem; }
.modal-text { margin:0; font-size:.8rem; color:var(--text-dim); line-height:1.4; }
.modal-actions { display:flex; gap:.75rem; justify-content:flex-end; }
.modal-actions button { flex:0 0 auto; }
button.danger { background: var(--danger); }
button.danger:hover { background:hsl(0 90% 54%); }
.modal .close-btn { position:absolute; top:.6rem; right:.7rem; width:1.9rem; height:1.9rem; border-radius:.6rem; background: hsl(230 12% 20%); border:none; color:#888; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:1rem; transition: background .2s, color .2s; }
.modal .close-btn:hover { background:hsl(230 12% 26%); color:#fff; }

.open-queue-btn { background:var(--accent); position:fixed; bottom:4.25rem; right:1rem; z-index:1200; padding:.8rem 1.1rem; border-radius:.9rem; box-shadow:0 .4rem 1rem -.2rem rgba(0,0,0,.5); }
.queue-count { display:inline-flex; align-items:center; justify-content:center; margin-left:.5rem; min-width:1.65rem; padding:.25rem .5rem; background:hsl(230 15% 12%); border:1px solid hsl(227 50% 45% / .4); color:#fff; font-size:.7rem; font-weight:600; border-radius:1rem; letter-spacing:.05em; position:relative; }
.queue-count.update { animation: bump .45s ease; }
@keyframes bump { 0% { transform:scale(1); } 35% { transform:scale(1.25); } 60% { transform:scale(.92); } 100% { transform:scale(1); } }

/* Brand block */
.brand { display:flex; align-items:center; gap:.75rem; margin-bottom:.65rem; }
.brand-logo { width:clamp(24px,8vw,36px); height:auto; display:block; }
.brand-name { font-size:.8rem; font-weight:600; letter-spacing:.12em; text-transform:uppercase; color:var(--text-dim); }

/* Top bar and language switcher */
.top-bar { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-bottom:.4rem; }
.lang-switch select { background:hsl(230 15% 10%); color:var(--text); border:1px solid hsl(230 12% 22%); padding:.55rem .7rem; font-size:.7rem; border-radius:.6rem; cursor:pointer; letter-spacing:.04em; }
.lang-switch select:focus { outline:none; border-color:var(--accent); box-shadow: var(--focus-ring); }
.lang-switch select:hover { background:hsl(230 15% 14%); }
.visually-hidden { position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0 0 0 0) !important; white-space:nowrap !important; border:0 !important; }

/* Footer link visibility */
footer { margin-top:2rem; font-size:.65rem; letter-spacing:.05em; color:var(--text-dim); text-align:center; }
footer a { color:var(--accent); text-decoration:none; font-weight:600; }
footer a:hover { text-decoration:underline; color:hsl(227 90% 68%); }
footer a:focus { outline:2px solid var(--accent); outline-offset:2px; border-radius:.25rem; }
/* Sidebar playlist custom select */
.playlist-select { display:flex; flex-direction:column; gap:.4rem; margin:0 0 1rem; position:relative; }
.ps-trigger { background:hsl(230 15% 10%); border:1px solid hsl(230 12% 24%); color:var(--text); font-size:.65rem; padding:.55rem .65rem; border-radius:.6rem; display:flex; justify-content:space-between; align-items:center; cursor:pointer; letter-spacing:.05em; width:100%; }
.ps-trigger:hover { background:hsl(230 15% 14%); }
.ps-trigger[aria-expanded="true"] { border-color:var(--accent); box-shadow:0 0 0 .1rem rgba(var(--accent-rgb),.35); }
.ps-caret { font-size:.7rem; opacity:.6; }
.ps-options { list-style:none; margin:0; padding:.4rem .45rem .5rem; position:absolute; top:100%; left:0; width:100%; background:hsl(230 15% 8%); border:1px solid hsl(230 12% 24%); border-radius:.7rem; display:flex; flex-direction:column; gap:.35rem; z-index:1500; box-shadow:0 .6rem 1.6rem -.4rem rgba(0,0,0,.55); }
.ps-options[hidden] { display:none; }
.ps-option { display:flex; align-items:center; gap:.55rem; padding:.45rem .5rem; background:hsl(230 15% 10%); border:1px solid hsl(230 12% 22%); border-radius:.55rem; font-size:.6rem; cursor:pointer; position:relative; }
.ps-option:hover { background:hsl(230 15% 14%); }
.ps-option.active { border-color:var(--accent); background:hsl(230 20% 18%); }
.ps-option .thumb { width:42px; height:30px; border-radius:.45rem; background:#222 center/cover no-repeat; flex:0 0 42px; }
.ps-option.empty .thumb { background:linear-gradient(135deg,#222,#1a1a1a); }
.ps-option .title { font-weight:600; letter-spacing:.03em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:120px; }
.ps-option .count { font-size:.55rem; opacity:.55; letter-spacing:.05em; }
.ps-option .actions { margin-left:auto; display:flex; gap:.3rem; }
.ps-option button { background:hsl(230 12% 20%); border:1px solid hsl(230 12% 28%); color:#eee; font-size:.5rem; padding:.25rem .4rem; border-radius:.4rem; cursor:pointer; line-height:1; }
.ps-option button:hover { background:hsl(230 12% 26%); }
.ps-option button.delete { border-color:#703; color:#f88; }
.ps-option button.delete:hover { background:rgba(112,3,32,.65); }

/* Snackbar for undo (Saved video deletion) */
.snackbar { position:fixed; left:50%; transform:translateX(-50%); bottom:1rem; background:hsl(230 15% 10%); border:1px solid hsl(230 12% 28%); padding:.65rem .9rem; border-radius:.7rem; color:var(--text); font-size:.65rem; letter-spacing:.04em; display:none; align-items:center; gap:.9rem; z-index:4000; box-shadow:0 .5rem 1.4rem -.4rem rgba(0,0,0,.55); max-width:calc(100% - 2rem); }
.snackbar.show { display:flex; animation:snackFade .25s ease; }
@keyframes snackFade { from { opacity:0; transform:translate(-50%, 10px); } to { opacity:1; transform:translate(-50%,0); } }
.snackbar .msg { flex:1 1 auto; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.snackbar button.undo-btn { background:hsl(227 80% 57%); color:#fff; border:none; padding:.4rem .75rem; font-size:.6rem; font-weight:600; border-radius:.5rem; cursor:pointer; letter-spacing:.05em; }
.snackbar button.undo-btn:hover { background:hsl(227 82% 63%); }
.snackbar .bar { position:absolute; left:0; bottom:0; height:3px; background:var(--accent); width:100%; animation:snackBar linear forwards; }
@keyframes snackBar { from { width:100%; } to { width:0%; } }
